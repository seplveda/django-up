---

- apt: update_cache=yes
- apt: upgrade=dist


- name: Add the Python 3 PPA
  apt_repository: repo='ppa:deadsnakes/ppa' state=present


- name: Install base packages
  apt:
    pkg:
      - git-core
      - build-essential
      - python-setuptools
      - python3.8
      - python3.8-dev
      - virtualenvwrapper
      - libpq-dev
      - libjpeg-dev
      - zlib1g-dev
      - htop


- name: Add app user group
  group:
    name: "{{ app_name }}"
    system: yes
    state: present


- name: Add app user
  user:
    name: "{{ app_name }}"
    groups:
      - "{{ app_name }}"
    state: present
    append: yes
    shell: /bin/bash


- name: Add admin user group group
  group:
    name: "brenton"
    system: yes
    state: present


- name: Add admin user
  user:
    name: "brenton"
    groups:
      - staff
      - "{{ app_name }}"
    state: present
    append: yes
    shell: /bin/bash
